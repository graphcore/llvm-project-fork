# RUN: llc -march=colossus -run-pass=colossus-and-elim -x=mir -o - < %s | FileCheck %s

# CHECK: $m0 = LDZ8_ZI killed $m0, $mzero, 0, 0
# CHECK: $m1 = AND_ZI $m0, 255, 0

---
name:            foo
tracksRegLiveness: false
machineFunctionInfo: {}
body:             |
  bb.0.entry:
    $m0 = LDZ8_ZI killed $m0, $mzero, 0, 0
    BR %bb.1, 0

  bb.1:
    $m1 = AND_ZI $m0, 255, 0
    BR %bb.4, 0

  bb.4:
    $m0 = ADD_ZI $m1, 42, 0
    BRZ $m0, %bb.2, 0
    BR %bb.3, 0

  bb.2:
    $m0 = COPY killed $m1
    RTN $lr, 0

  bb.3:
    $m0 = ADD $m0, killed $m1, 0
    RTN $lr, 0

...
